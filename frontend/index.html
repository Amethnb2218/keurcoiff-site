<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeurCoiff' ‚Ä¢ R√©servez votre coiffeur √† Dakar</title>
    
    <!-- SEO Optimis√© -->
    <meta name="description" content="R√©servez votre coiffeur √† Dakar en 30s. Paiement Orange Money, Wave. Service √† domicile. 50+ salons partenaires. Chatbot intelligent.">
    <meta name="keywords" content="coiffure dakar, r√©servation coiffure, orange money, wave, tresses dakar, salon beaut√© s√©n√©gal">
    
    <!-- Pr√©load critical resources -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" as="style">
    
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#7C3AED',
                        secondary: '#F59E0B', 
                        accent: '#10B981',
                        dark: '#1F2937',
                        premium: {
                            gold: '#FFD700',
                            silver: '#C0C0C0',
                            bronze: '#CD7F32'
                        }
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 3s infinite',
                        'gradient': 'gradient 3s ease infinite',
                        'shimmer': 'shimmer 2s infinite',
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'premium-gradient': 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            --primary: #7C3AED;
            --secondary: #F59E0B;
            --accent: #10B981;
        }
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .premium-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .gradient-animate {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        
        /* Loading spinner */
        .loader {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #7C3AED;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Styles pour le message de d√©mo */
        .demo-message {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Styles additionnels pour le chatbot */
        .loader-small {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #7C3AED;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        .quick-action-btn {
            padding: 10px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            text-align: center;
        }
        
        .quick-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .salon-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .salon-card:hover {
            transform: translateY(-8px);
        }
        
        .parallax {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .shine-effect {
            position: relative;
            overflow: hidden;
        }
        
        .shine-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .shine-effect:hover::before {
            left: 100%;
        }
        
        .typewriter {
            overflow: hidden;
            border-right: .15em solid #7C3AED;
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #7C3AED; }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 5px rgba(124, 58, 237, 0.5); }
            50% { box-shadow: 0 0 20px rgba(124, 58, 237, 0.8); }
            100% { box-shadow: 0 0 5px rgba(124, 58, 237, 0.5); }
        }
        
        .shimmer-effect {
            position: relative;
            overflow: hidden;
        }
        
        .shimmer-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        /* Map Styles */
        #map {
            height: 500px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .leaflet-popup-content {
            margin: 15px;
            font-family: 'Inter', sans-serif;
        }
        
        .distance-badge {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* Geolocation Button */
        .geolocation-btn {
            background: linear-gradient(135deg, #7C3AED, #6D28D9);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
        }
        
        .geolocation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
        }
        
        .geolocation-btn:active {
            transform: translateY(0);
        }
        
        /* Location Pin Animation */
        .location-pin {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        
        /* Search Bar Styles */
        .search-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 50px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #7C3AED;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }
        
        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #7C3AED;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            background: #6D28D9;
            transform: translateY(-50%) scale(1.05);
        }
        
        /* Dashboard Styles */
        .sidebar {
            transition: all 0.3s ease;
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar.collapsed .sidebar-text {
            display: none;
        }
        
        .main-content {
            transition: all 0.3s ease;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            transform: rotate(30deg);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .reservation-item {
            border-left: 4px solid #7C3AED;
            transition: all 0.3s ease;
        }
        
        .reservation-item:hover {
            transform: translateX(8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-confirmed {
            background: #D1FAE5;
            color: #065F46;
        }
        
        .status-pending {
            background: #FEF3C7;
            color: #92400E;
        }
        
        .status-completed {
            background: #E0E7FF;
            color: #3730A3;
        }
        
        .status-cancelled {
            background: #FEE2E2;
            color: #991B1B;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            #map {
                height: 300px;
            }
            
            .sidebar {
                position: fixed;
                left: -100%;
                z-index: 40;
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            .mobile-overlay {
                display: none;
            }
            
            .mobile-overlay.active {
                display: block;
            }
        }
    </style>
</head>

<body class="font-inter bg-white antialiased">
    <!-- Navigation Premium -->
    <nav class="fixed w-full z-50 transition-all duration-300 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="flex items-center space-x-3 shine-effect">
                        <div class="w-12 h-12 bg-gradient-to-r from-primary to-purple-600 rounded-2xl flex items-center justify-center shadow-lg pulse-glow">
                            <i class="fas fa-crown text-white text-lg"></i>
                        </div>
                        <div>
                            <span class="text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent">KeurCoiff'</span>
                            <div class="text-xs text-gray-500 -mt-1">by Senegal Tech</div>
                        </div>
                    </a>
                </div>

                <!-- Menu Desktop -->
                <div class="hidden lg:flex items-center space-x-8">
                    <a href="#accueil" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 relative group">
                        Accueil
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#features" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 relative group">
                        Fonctionnalit√©s
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#salons" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 relative group">
                        Salons
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#localisation" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 relative group">
                        üìç Proche de moi
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#pricing" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 relative group">
                        Devenir Partenaire
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    
                    <!-- √âtat de connexion -->
                    <div id="authSection">
                        <!-- Sera rempli par JavaScript -->
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="lg:hidden">
                    <button id="menuBtn" class="text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Coiffeur Section (Nouveau) -->
    <section id="dashboard" class="pt-24 pb-20 bg-gray-50 min-h-screen hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Header Dashboard -->
            <div class="mb-8" data-aos="fade-up">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl lg:text-4xl font-bold text-gray-900">
                            Dashboard <span class="text-primary" id="dashboardSalonName">Salon</span>
                        </h1>
                        <p class="text-gray-600 mt-2" id="dashboardDate">Chargement...</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="toggleNotifications()" class="relative p-3 text-gray-600 hover:text-primary transition-colors">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute top-0 right-0 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">3</span>
                        </button>
                        <button onclick="toggleDashboardMenu()" class="flex items-center space-x-3 bg-white p-3 rounded-2xl shadow-lg border border-gray-100">
                            <div class="w-10 h-10 bg-gradient-to-r from-primary to-purple-600 rounded-full flex items-center justify-center text-white font-bold">
                                <span id="userInitial">U</span>
                            </div>
                            <div class="text-left hidden lg:block">
                                <div class="font-semibold text-gray-900" id="userName">Utilisateur</div>
                                <div class="text-sm text-gray-500">Coiffeur</div>
                            </div>
                            <i class="fas fa-chevron-down text-gray-400"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Menu d√©roulant utilisateur -->
            <div id="dashboardMenu" class="hidden absolute right-4 mt-2 w-48 bg-white rounded-2xl shadow-2xl border border-gray-200 py-2 z-50">
                <a href="profile.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
                    <i class="fas fa-user text-primary w-5"></i>
                    <span>Mon profil</span>
                </a>
                <a href="mes-reservations.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
                    <i class="fas fa-calendar text-primary w-5"></i>
                    <span>Mes r√©servations</span>
                </a>
                <div class="border-t border-gray-200 my-2"></div>
                <button onclick="logout()" class="flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 w-full text-left transition-colors">
                    <i class="fas fa-sign-out-alt w-5"></i>
                    <span>D√©connexion</span>
                </button>
            </div>

            <!-- Statistiques -->
            <div class="dashboard-grid mb-8">
                <!-- Carte Statistique 1 -->
                <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="text-white/80 text-sm">R√©servations Aujourd'hui</div>
                            <div class="text-3xl font-bold mt-2" id="todayBookings">8</div>
                            <div class="text-green-300 text-sm mt-2 flex items-center">
                                <i class="fas fa-arrow-up mr-1"></i>
                                <span>+12% vs hier</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-calendar-check text-white text-xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Carte Statistique 2 -->
                <div class="stat-card bg-gradient-to-r from-secondary to-orange-500" data-aos="fade-up" data-aos-delay="200">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="text-white/80 text-sm">Revenu Hebdomadaire</div>
                            <div class="text-3xl font-bold mt-2" id="weeklyRevenue">125,400 FCFA</div>
                            <div class="text-orange-200 text-sm mt-2 flex items-center">
                                <i class="fas fa-trending-up mr-1"></i>
                                <span>+18% vs semaine derni√®re</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-money-bill-wave text-white text-xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Carte Statistique 3 -->
                <div class="stat-card bg-gradient-to-r from-accent to-green-500" data-aos="fade-up" data-aos-delay="300">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="text-white/80 text-sm">Clients Satisfaits</div>
                            <div class="text-3xl font-bold mt-2" id="satisfiedClients">94%</div>
                            <div class="text-green-200 text-sm mt-2 flex items-center">
                                <i class="fas fa-star mr-1"></i>
                                <span>4.8/5 √©toiles</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-smile text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- R√©servations du jour -->
                <div class="lg:col-span-2" data-aos="fade-up">
                    <div class="bg-white rounded-3xl shadow-lg border border-gray-100 p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-gray-900">R√©servations du Jour</h3>
                            <button onclick="viewAllReservations()" class="text-primary hover:text-purple-600 font-semibold text-sm">
                                Voir tout
                            </button>
                        </div>
                        
                        <div class="space-y-4" id="todayReservationsList">
                            <!-- Les r√©servations seront charg√©es ici -->
                        </div>
                    </div>
                </div>

                <!-- Actions rapides -->
                <div class="space-y-6" data-aos="fade-up" data-aos-delay="200">
                    <!-- Actions rapides -->
                    <div class="bg-white rounded-3xl shadow-lg border border-gray-100 p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Actions Rapides</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="addReservation()" class="p-4 bg-primary/10 text-primary rounded-2xl hover:bg-primary hover:text-white transition-all flex flex-col items-center justify-center">
                                <i class="fas fa-plus text-xl mb-2"></i>
                                <span class="text-sm font-semibold">Nouvelle R√©servation</span>
                            </button>
                            <button onclick="manageSalon()" class="p-4 bg-secondary/10 text-secondary rounded-2xl hover:bg-secondary hover:text-white transition-all flex flex-col items-center justify-center">
                                <i class="fas fa-store text-xl mb-2"></i>
                                <span class="text-sm font-semibold">G√©rer Salon</span>
                            </button>
                            <button onclick="updateAvailability()" class="p-4 bg-accent/10 text-accent rounded-2xl hover:bg-accent hover:text-white transition-all flex flex-col items-center justify-center">
                                <i class="fas fa-clock text-xl mb-2"></i>
                                <span class="text-sm font-semibold">Horaires</span>
                            </button>
                            <button onclick="addService()" class="p-4 bg-purple-500/10 text-purple-600 rounded-2xl hover:bg-purple-500 hover:text-white transition-all flex flex-col items-center justify-center">
                                <i class="fas fa-scissors text-xl mb-2"></i>
                                <span class="text-sm font-semibold">Nouveau Service</span>
                            </button>
                        </div>
                    </div>

                    <!-- Statistiques rapides -->
                    <div class="bg-gradient-to-r from-primary to-purple-600 text-white rounded-3xl p-6">
                        <h3 class="text-xl font-bold mb-4">Performance</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span>Taux de remplissage</span>
                                <span class="font-bold">78%</span>
                            </div>
                            <div class="w-full bg-white/20 rounded-full h-2">
                                <div class="bg-white h-2 rounded-full" style="width: 78%"></div>
                            </div>
                            
                            <div class="flex justify-between items-center mt-4">
                                <span>Clients fid√®les</span>
                                <span class="font-bold">65%</span>
                            </div>
                            <div class="w-full bg-white/20 rounded-full h-2">
                                <div class="bg-white h-2 rounded-full" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hero Section Premium -->
    <section id="accueil" class="premium-gradient pt-24 pb-20 relative overflow-hidden min-h-screen flex items-center">
        <!-- Background Elements Anim√©s -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl floating"></div>
            <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-secondary/20 rounded-full blur-3xl floating" style="animation-delay: 2s;"></div>
            <div class="absolute top-1/2 left-1/4 w-60 h-60 bg-accent/10 rounded-full blur-3xl floating" style="animation-delay: 4s;"></div>
            
            <!-- Particules anim√©es -->
            <div class="particles-container absolute inset-0">
                <div class="particle absolute w-2 h-2 bg-white/30 rounded-full" style="top: 20%; left: 10%; animation: float 8s ease-in-out infinite;"></div>
                <div class="particle absolute w-3 h-3 bg-secondary/40 rounded-full" style="top: 60%; left: 80%; animation: float 6s ease-in-out infinite reverse;"></div>
                <div class="particle absolute w-1 h-1 bg-accent/50 rounded-full" style="top: 80%; left: 30%; animation: float 10s ease-in-out infinite;"></div>
                <div class="particle absolute w-2 h-2 bg-white/20 rounded-full" style="top: 40%; left: 60%; animation: float 7s ease-in-out infinite reverse;"></div>
            </div>
        </div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full">
            <div class="grid lg:grid-cols-2 gap-16 items-center">
                <!-- Left Content -->
                <div class="text-white" data-aos="fade-right" data-aos-duration="1000">
                    <div class="inline-flex items-center px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm border border-white/20 mb-6 shine-effect">
                        <i class="fas fa-star text-yellow-300 mr-2 animate-pulse"></i>
                        <span class="text-sm font-medium">#1 Application coiffure au S√©n√©gal</span>
                    </div>
                    
                    <h1 class="text-5xl lg:text-6xl xl:text-7xl font-bold mb-6 leading-tight">
                        Votre style,
                        <span class="typewriter text-transparent bg-clip-text bg-gradient-to-r from-secondary to-yellow-300 block">
                            notre expertise
                        </span>
                    </h1>
                    
                    <p class="text-xl lg:text-2xl text-gray-200 mb-8 leading-relaxed">
                        R√©servez le meilleur coiffeur pr√®s de chez vous. 
                        <span class="text-white font-semibold bg-gradient-to-r from-yellow-400 to-yellow-200 bg-clip-text text-transparent">Paiement s√©curis√© Orange Money & Wave.</span>
                        Service √† domicile disponible.
                    </p>
                    
                    <!-- Barre de recherche am√©lior√©e -->
                    <div class="search-container mb-8">
                        <input type="text" id="globalSearch" placeholder="üîç Rechercher un salon, service, coiffeur..." class="search-input">
                        <button onclick="performSearch()" class="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-4 mb-8">
                        <button class="group bg-white text-primary px-8 py-4 rounded-xl font-semibold hover:shadow-2xl transition-all duration-300 flex items-center justify-center hover:scale-105 shine-effect">
                            <i class="fab fa-google-play mr-3 text-lg group-hover:scale-110 transition-transform"></i>
                            <div class="text-left">
                                <div class="text-xs opacity-70">T√©l√©chargez sur</div>
                                <div class="text-lg">Google Play</div>
                            </div>
                        </button>
                        
                        <button class="group bg-dark text-white px-8 py-4 rounded-xl font-semibold hover:shadow-2xl transition-all duration-300 flex items-center justify-center hover:scale-105 border border-gray-700 shine-effect">
                            <i class="fab fa-apple mr-3 text-lg group-hover:scale-110 transition-transform"></i>
                            <div class="text-left">
                                <div class="text-xs opacity-70">Disponible sur</div>
                                <div class="text-lg">App Store</div>
                            </div>
                        </button>
                        
                        <button onclick="scrollToLocalisation()" class="group bg-transparent text-white border-2 border-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-primary transition-all duration-300 flex items-center justify-center">
                            <i class="fas fa-map-marker-alt mr-3 group-hover:scale-110 transition-transform"></i>
                            <span>üìç Proche de moi</span>
                        </button>
                    </div>

                    <!-- Trust Indicators -->
                    <div class="grid grid-cols-3 gap-8 text-center">
                        <div class="text-center transform hover:scale-110 transition-transform duration-300">
                            <div class="text-3xl font-bold text-white mb-1 pulse-glow">50+</div>
                            <div class="text-gray-300 text-sm">Salons Experts</div>
                        </div>
                        <div class="text-center transform hover:scale-110 transition-transform duration-300">
                            <div class="text-3xl font-bold text-white mb-1">4.8<span class="text-yellow-300">‚òÖ</span></div>
                            <div class="text-gray-300 text-sm">Note Moyenne</div>
                        </div>
                        <div class="text-center transform hover:scale-110 transition-transform duration-300">
                            <div class="text-3xl font-bold text-white mb-1">2K+</div>
                            <div class="text-gray-300 text-sm">Clients Satisfaits</div>
                        </div>
                    </div>
                </div>

                <!-- Right Content - App Mockup Anim√© -->
                <div class="relative" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                    <div class="relative">
                        <!-- Floating Phone Mockup -->
                        <div class="floating relative z-10">
                            <div class="bg-white rounded-[40px] p-6 shadow-2xl border-8 border-gray-800 mx-auto w-72 shimmer-effect">
                                <!-- App Header -->
                                <div class="bg-gradient-to-r from-primary to-purple-600 rounded-3xl p-4 text-white text-center mb-4">
                                    <div class="font-bold">KeurCoiff'</div>
                                    <div class="text-xs opacity-90">Salons pr√®s de vous</div>
                                </div>
                                
                                <!-- App Content -->
                                <div class="space-y-3">
                                    <!-- Salon Item -->
                                    <div class="flex items-center space-x-3 p-3 rounded-2xl bg-gray-50 hover:bg-primary/5 cursor-pointer transition-colors">
                                        <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center">
                                            <i class="fas fa-scissors text-primary"></i>
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-semibold text-gray-900">Salon Awa Beauty</div>
                                            <div class="flex items-center text-sm text-gray-600">
                                                <i class="fas fa-map-marker-alt text-primary mr-1"></i>
                                                <span>Plateau ‚Ä¢ 250m</span>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="flex items-center text-yellow-400 text-sm">
                                                <i class="fas fa-star"></i>
                                                <span class="text-gray-700 ml-1">4.8</span>
                                            </div>
                                            <div class="text-primary font-bold text-sm">5 000 FCFA</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Loading more salons -->
                                    <div class="text-center py-4">
                                        <div class="loader mx-auto"></div>
                                        <div class="text-xs text-gray-500 mt-2">Chargement des salons...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Floating Elements -->
                        <div class="absolute -top-10 -left-10 w-20 h-20 bg-secondary/20 rounded-full blur-xl"></div>
                        <div class="absolute -bottom-10 -right-10 w-24 h-24 bg-accent/20 rounded-full blur-xl"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section Am√©lior√©e -->
    <section id="features" class="py-20 bg-gradient-to-b from-white to-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Une exp√©rience
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">unique</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    D√©couvrez pourquoi KeurCoiff' r√©volutionne la coiffure au S√©n√©gal avec des fonctionnalit√©s pens√©es pour vous.
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Feature 1 - Chatbot IA -->
                <div class="group bg-gradient-to-br from-white to-gray-50 p-8 rounded-3xl shadow-lg hover-lift border border-gray-100" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-16 h-16 bg-gradient-to-r from-primary to-purple-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-robot text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Chatbot IA Intelligent</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        Notre assistant IA vous conseille en fran√ßais et wolof. Envoyez une photo et trouvez le style parfait.
                    </p>
                    <ul class="space-y-3">
                        <li class="flex items-center text-gray-700">
                            <i class="fas fa-check text-accent mr-3"></i>
                            <span>Reconnaissance d'images</span>
                        </li>
                        <li class="flex items-center text-gray-700">
                            <i class="fas fa-check text-accent mr-3"></i>
                            <span>Conseils personnalis√©s</span>
                        </li>
                        <li class="flex items-center text-gray-700">
                            <i class="fas fa-check text-accent mr-3"></i>
                            <span>Support bilingue</span>
                        </li>
                    </ul>
                </div>

                <!-- Feature 2 - Paiements -->
                <div class="group bg-gradient-to-br from-white to-gray-50 p-8 rounded-3xl shadow-lg hover-lift border border-gray-100" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-16 h-16 bg-gradient-to-r from-secondary to-orange-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-mobile-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Paiements 100% S√©n√©gal</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        Payez facilement avec tous les mobile money locaux. S√©curis√© et instantan√©.
                    </p>
                    <div class="flex space-x-4 mb-6">
                        <div class="bg-orange-50 px-4 py-2 rounded-lg">
                            <span class="text-orange-600 font-semibold">Orange Money</span>
                        </div>
                        <div class="bg-purple-50 px-4 py-2 rounded-lg">
                            <span class="text-purple-600 font-semibold">Wave</span>
                        </div>
                        <div class="bg-blue-50 px-4 py-2 rounded-lg">
                            <span class="text-blue-600 font-semibold">Free Money</span>
                        </div>
                    </div>
                </div>

                <!-- Feature 3 - G√©olocalisation -->
                <div class="group bg-gradient-to-br from-white to-gray-50 p-8 rounded-3xl shadow-lg hover-lift border border-gray-100" data-aos="fade-up" data-aos-delay="300">
                    <div class="w-16 h-16 bg-gradient-to-r from-accent to-green-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-map-marker-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">G√©olocalisation Intelligente</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        Trouvez instantan√©ment les salons les plus proches de vous avec notre syst√®me de g√©olocalisation avanc√©.
                    </p>
                    <div class="bg-gradient-to-r from-accent to-green-500 text-white p-4 rounded-2xl">
                        <div class="flex items-center justify-between">
                            <span class="font-semibold">üìç Proche de vous</span>
                            <span class="bg-white text-accent px-3 py-1 rounded-full text-sm font-bold">GPS</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section G√©olocalisation Avanc√©e -->
    <section id="localisation" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Trouvez les salons
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">pr√®s de vous</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Notre syst√®me de g√©olocalisation intelligent vous montre les meilleurs salons dans votre quartier.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 items-start">
                <!-- Carte Interactive -->
                <div class="space-y-6" data-aos="fade-right">
                    <div class="bg-gradient-to-br from-gray-50 to-white p-8 rounded-3xl shadow-xl border border-gray-100">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-bold text-gray-900">Carte Interactive</h3>
                            <button onclick="getUserLocation()" class="geolocation-btn flex items-center space-x-2">
                                <i class="fas fa-location-arrow"></i>
                                <span>Me localiser</span>
                            </button>
                        </div>
                        
                        <!-- Carte Leaflet -->
                        <div id="map" class="w-full"></div>
                        
                        <!-- Statistiques de localisation -->
                        <div class="grid grid-cols-3 gap-4 mt-6 text-center">
                            <div class="bg-blue-50 p-4 rounded-2xl">
                                <div class="text-2xl font-bold text-blue-600" id="nearbyCount">0</div>
                                <div class="text-sm text-blue-800">√Ä proximit√©</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-2xl">
                                <div class="text-2xl font-bold text-green-600" id="distanceAvg">0m</div>
                                <div class="text-sm text-green-800">Distance moyenne</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-2xl">
                                <div class="text-2xl font-bold text-purple-600" id="topRated">4.8‚òÖ</div>
                                <div class="text-sm text-purple-800">Meilleure note</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Liste des salons proches -->
                <div class="space-y-6" data-aos="fade-left">
                    <div class="bg-gradient-to-br from-primary to-purple-600 text-white p-8 rounded-3xl shadow-xl">
                        <h3 class="text-2xl font-bold mb-6">üìç Salons les plus proches</h3>
                        
                        <div id="nearbySalons" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Les salons proches seront charg√©s ici -->
                            <div class="text-center py-8">
                                <div class="loader mx-auto mb-4"></div>
                                <div class="text-white/80">Recherche des salons pr√®s de vous...</div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-white/10 rounded-2xl">
                            <div class="flex items-center space-x-3 text-sm">
                                <i class="fas fa-info-circle text-yellow-300"></i>
                                <span>Activez votre g√©olocalisation pour des r√©sultats plus pr√©cis</span>
                            </div>
                        </div>
                    </div>

                    <!-- Filtres rapides -->
                    <div class="bg-white p-6 rounded-3xl shadow-lg border border-gray-100">
                        <h4 class="font-semibold text-gray-900 mb-4">Filtrer par distance</h4>
                        <div class="grid grid-cols-3 gap-3">
                            <button onclick="filterByDistance(500)" class="p-3 text-center border border-gray-200 rounded-xl hover:bg-primary hover:text-white transition-all">
                                <div class="font-semibold">500m</div>
                                <div class="text-xs text-gray-500">Tr√®s proche</div>
                            </button>
                            <button onclick="filterByDistance(1000)" class="p-3 text-center border border-gray-200 rounded-xl hover:bg-primary hover:text-white transition-all">
                                <div class="font-semibold">1km</div>
                                <div class="text-xs text-gray-500">Proche</div>
                            </button>
                            <button onclick="filterByDistance(5000)" class="p-3 text-center border border-gray-200 rounded-xl hover:bg-primary hover:text-white transition-all">
                                <div class="font-semibold">5km</div>
                                <div class="text-xs text-gray-500">Secteur</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Salons en Temps R√©el -->
    <section id="salons" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Nos salons
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">partenaires</span>
                </h2>
                <p class="text-xl text-gray-600">
                    D√©couvrez les meilleurs coiffeurs de Dakar, s√©lectionn√©s avec soin.
                </p>
            </div>

            <!-- Filtres -->
            <div class="flex flex-wrap gap-4 justify-center mb-12" data-aos="fade-up">
                <button class="filter-btn active bg-primary text-white px-6 py-3 rounded-xl font-semibold transition-all hover:shadow-lg" data-filter="all">
                    Tous les salons
                </button>
                <button class="filter-btn bg-white text-gray-700 px-6 py-3 rounded-xl font-semibold border border-gray-200 transition-all hover:shadow-lg" data-filter="domicile">
                    üè† √Ä domicile
                </button>
                <button class="filter-btn bg-white text-gray-700 px-6 py-3 rounded-xl font-semibold border border-gray-200 transition-all hover:shadow-lg" data-filter="femme">
                    üë© Sp√©cialiste femme
                </button>
                <button class="filter-btn bg-white text-gray-700 px-6 py-3 rounded-xl font-semibold border border-gray-200 transition-all hover:shadow-lg" data-filter="homme">
                    üë® Sp√©cialiste homme
                </button>
            </div>

            <!-- Grille des salons -->
            <div id="salonsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" data-aos="fade-up">
                <!-- Les salons seront charg√©s ici par JavaScript -->
            </div>

            <!-- Loading State -->
            <div id="loadingSalons" class="text-center py-12">
                <div class="loader mx-auto mb-4"></div>
                <div class="text-gray-600">Chargement des salons...</div>
            </div>
        </div>
    </section>

    <!-- Section Devenir Partenaire -->
    <section id="pricing" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Devenez partenaire
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">KeurCoiff'</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Rejoignez la premi√®re plateforme de r√©servation de coiffure au S√©n√©gal et d√©veloppez votre business.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-12 items-start">
                <!-- Formulaire Partenaire -->
                <div class="bg-gradient-to-br from-gray-50 to-white p-8 rounded-3xl shadow-xl border border-gray-100" data-aos="fade-right">
                    <h3 class="text-3xl font-bold text-gray-900 mb-6">Inscription Salon</h3>
                    
                    <form id="partnerForm" class="space-y-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Nom du salon *</label>
                                <input type="text" name="salonName" required class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">T√©l√©phone *</label>
                                <input type="tel" name="phone" required class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="77 123 45 67">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Quartier & Ville *</label>
                            <input type="text" name="location" required class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="Plateau, Dakar">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Services propos√©s *</label>
                            <div class="grid grid-cols-2 gap-3">
                                <label class="flex items-center space-x-3 p-3 rounded-xl border border-gray-200 hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="services" value="tresses" class="rounded text-primary focus:ring-primary">
                                    <span>Tresses</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 rounded-xl border border-gray-200 hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="services" value="coupe-femme" class="rounded text-primary focus:ring-primary">
                                    <span>Coupe femme</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 rounded-xl border border-gray-200 hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="services" value="coupe-homme" class="rounded text-primary focus:ring-primary">
                                    <span>Coupe homme</span>
                                </label>
                                <label class="flex items-center space-x-3 p-3 rounded-xl border border-gray-200 hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="services" value="domicile" class="rounded text-primary focus:ring-primary">
                                    <span>√Ä domicile</span>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all duration-300 hover:scale-105 flex items-center justify-center">
                            <span>Devenir Partenaire Gratuitement</span>
                            <i class="fas fa-arrow-right ml-3"></i>
                        </button>
                        
                        <p class="text-center text-sm text-gray-600">
                            üìû Nous vous contactons sous 2 heures pour finaliser votre inscription
                        </p>
                    </form>
                </div>

                <!-- Avantages -->
                <div class="space-y-6" data-aos="fade-left">
                    <div class="bg-gradient-to-r from-primary to-purple-600 text-white p-8 rounded-3xl">
                        <h4 class="text-2xl font-bold mb-4">Pourquoi nous rejoindre ?</h4>
                        <ul class="space-y-4">
                            <li class="flex items-center">
                                <i class="fas fa-chart-line text-secondary mr-4 text-xl"></i>
                                <span>Augmentez votre client√®le de 40% en moyenne</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-users text-secondary mr-4 text-xl"></i>
                                <span>Acc√©dez √† des milliers de clients potentiels</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-crown text-secondary mr-4 text-xl"></i>
                                <span>Mettez en avant votre expertise</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-gradient-to-r from-secondary to-orange-500 text-white p-8 rounded-3xl">
                        <h4 class="text-2xl font-bold mb-4">Offre de lancement</h4>
                        <div class="text-4xl font-bold mb-2">0 FCFA</div>
                        <div class="text-white/80 mb-4">Pendant 1 mois</div>
                        <ul class="space-y-2 text-sm">
                            <li>‚úÖ Profil salon complet</li>
                            <li>‚úÖ R√©servations illimit√©es</li>
                            <li>‚úÖ Support client d√©di√©</li>
                            <li>‚úÖ Formation incluse</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Premium -->
    <footer class="bg-gradient-to-br from-gray-900 to-gray-800 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-4 gap-8 mb-12">
                <!-- Brand -->
                <div>
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-primary to-purple-600 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-crown text-white text-lg"></i>
                        </div>
                        <div>
                            <span class="text-2xl font-bold">KeurCoiff'</span>
                            <div class="text-gray-400 text-sm">Votre beaut√©, notre priorit√©</div>
                        </div>
                    </div>
                    <p class="text-gray-400 mb-6 leading-relaxed">
                        La premi√®re plateforme de r√©servation de coiffure au S√©n√©gal. Innovation et qualit√© au service de votre beaut√©.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 bg-gray-700 rounded-xl flex items-center justify-center hover:bg-primary transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-700 rounded-xl flex items-center justify-center hover:bg-primary transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-700 rounded-xl flex items-center justify-center hover:bg-primary transition-colors">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <!-- Liens -->
                <div>
                    <h4 class="font-semibold text-lg mb-6">Navigation</h4>
                    <div class="space-y-3">
                        <a href="#accueil" class="block text-gray-400 hover:text-white transition-colors">Accueil</a>
                        <a href="#features" class="block text-gray-400 hover:text-white transition-colors">Fonctionnalit√©s</a>
                        <a href="#salons" class="block text-gray-400 hover:text-white transition-colors">Salons</a>
                        <a href="#localisation" class="block text-gray-400 hover:text-white transition-colors">üìç Proche de moi</a>
                        <a href="#pricing" class="block text-gray-400 hover:text-white transition-colors">Devenir Partenaire</a>
                    </div>
                </div>

                <!-- Contact -->
                <div>
                    <h4 class="font-semibold text-lg mb-6">Contact</h4>
                    <div class="space-y-3 text-gray-400">
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-primary mr-3"></i>
                            <span>contact@keurcoiff.sn</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-phone text-primary mr-3"></i>
                            <span>+221 77 123 45 67</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-primary mr-3"></i>
                            <span>Dakar, S√©n√©gal</span>
                        </div>
                    </div>
                </div>

                <!-- Newsletter -->
                <div>
                    <h4 class="font-semibold text-lg mb-6">Restez inform√©</h4>
                    <p class="text-gray-400 mb-4">Recevez les derni√®res actualit√©s et promotions.</p>
                    <div class="flex">
                        <input type="email" placeholder="Votre email" class="flex-1 bg-gray-700 text-white px-4 py-3 rounded-l-xl focus:outline-none focus:ring-2 focus:ring-primary">
                        <button class="bg-primary px-6 py-3 rounded-r-xl font-semibold hover:bg-purple-600 transition-colors">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-700 pt-8 text-center text-gray-400">
                <p>&copy; 2024 KeurCoiff'. Tous droits r√©serv√©s. D√©velopp√© avec ‚ù§Ô∏è au S√©n√©gal</p>
            </div>
        </div>
    </footer>

    <!-- Modal de R√©servation -->
    <div id="reservationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <!-- Header -->
            <div class="bg-gradient-to-r from-primary to-purple-600 text-white p-6 rounded-t-3xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">R√©server une prestation</h3>
                    <button onclick="closeReservationModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="reservationSalonName" class="text-white/90 mt-2"></div>
            </div>

            <!-- Form -->
            <div class="p-6">
                <form id="reservationForm" class="space-y-4">
                    <input type="hidden" id="reservationSalonId">
                    
                    <!-- Service -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Service *</label>
                        <select id="reservationService" required 
                                class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                            <option value="">Choisir un service</option>
                        </select>
                    </div>

                    <!-- Date -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Date *</label>
                        <input type="date" id="reservationDate" required 
                               class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                               min="">
                    </div>

                    <!-- Heure -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Heure *</label>
                        <select id="reservationTime" required 
                                class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                            <option value="">Choisir l'heure</option>
                            <option value="08:00">08:00</option>
                            <option value="09:00">09:00</option>
                            <option value="10:00">10:00</option>
                            <option value="11:00">11:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                        </select>
                    </div>

                    <!-- Notes -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Notes (optionnel)</label>
                        <textarea id="reservationNotes" rows="3" 
                                  class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                                  placeholder="Pr√©cisions sur la prestation..."></textarea>
                    </div>

                    <!-- Actions -->
                    <div class="flex space-x-4 pt-4">
                        <button type="button" onclick="closeReservationModal()" 
                                class="flex-1 bg-gray-100 text-gray-700 py-4 rounded-xl font-semibold hover:bg-gray-200 transition-all">
                            Annuler
                        </button>
                        <button type="submit" 
                                class="flex-1 bg-gradient-to-r from-primary to-purple-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all flex items-center justify-center">
                            <i class="fas fa-calendar-check mr-2"></i>
                            Confirmer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Chatbot Widget Avanc√© -->
    <div id="chatbotWidget" class="fixed bottom-6 right-6 z-50">
        <!-- Chat Container -->
        <div id="chatbotContainer" class="hidden w-96 h-[600px] bg-white rounded-3xl shadow-2xl flex flex-col border border-gray-200">
            <!-- Chat Header -->
            <div class="bg-gradient-to-r from-primary to-purple-600 text-white p-6 rounded-t-3xl">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-robot text-white text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-lg">Assistant KeurCoiff'</div>
                            <div class="text-white/80 text-sm flex items-center">
                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                En ligne ‚Ä¢ Pr√™t √† vous aider
                            </div>
                        </div>
                    </div>
                    <button onclick="closeChat()" class="text-white/80 hover:text-white transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-3 gap-4 text-center text-sm">
                    <div class="bg-white/10 rounded-lg py-2">
                        <div class="font-bold">50+</div>
                        <div class="text-white/70">Salons</div>
                    </div>
                    <div class="bg-white/10 rounded-lg py-2">
                        <div class="font-bold">4.8‚òÖ</div>
                        <div class="text-white/70">Note</div>
                    </div>
                    <div class="bg-white/10 rounded-lg py-2">
                        <div class="font-bold">2min</div>
                        <div class="text-white/70">R√©ponse</div>
                    </div>
                </div>
            </div>

            <!-- Chat Messages -->
            <div id="chatMessages" class="flex-1 p-6 overflow-y-auto bg-gray-50">
                <!-- Messages will be loaded here -->
            </div>

            <!-- Quick Actions & Input -->
            <div class="p-6 border-t border-gray-200 bg-white rounded-b-3xl">
                <!-- Quick Actions -->
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <button onclick="sendQuickReply('Trouver un salon pr√®s de moi')" class="quick-action-btn bg-primary/10 text-primary border border-primary/20">
                        üéØ Trouver salon
                    </button>
                    <button onclick="sendQuickReply('Je veux un service √† domicile')" class="quick-action-btn bg-green-100 text-green-700 border border-green-200">
                        üè† √Ä domicile
                    </button>
                    <button onclick="sendQuickReply('Quels sont les prix moyens')" class="quick-action-btn bg-orange-100 text-orange-700 border border-orange-200">
                        üí∞ Voir prix
                    </button>
                    <button onclick="sendQuickReply('J ai une photo √† analyser')" class="quick-action-btn bg-purple-100 text-purple-700 border border-purple-200">
                        üì∏ Analyser photo
                    </button>
                </div>
                
                <!-- Input Area -->
                <div class="flex space-x-3">
                    <!-- Image Upload -->
                    <label class="flex items-center justify-center w-12 h-12 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors cursor-pointer">
                        <i class="fas fa-image text-gray-600"></i>
                        <input type="file" id="imageUpload" accept="image/*" class="hidden">
                    </label>
                    
                    <!-- Message Input -->
                    <div class="flex-1 relative">
                        <input type="text" id="chatInput" placeholder="Tapez votre message..." class="w-full p-4 pr-12 rounded-xl border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent">
                        <button onclick="sendMessage()" class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-primary text-white p-2 rounded-lg hover:bg-purple-600 transition-colors">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Features Indicator -->
                <div class="text-center text-xs text-gray-500 mt-3">
                    üí° Essayez : "salon tresses plateau" ou envoyez une photo
                </div>
            </div>
        </div>

        <!-- Chat Toggle Button -->
        <button onclick="toggleChat()" class="w-16 h-16 bg-gradient-to-r from-primary to-purple-600 rounded-2xl shadow-2xl flex items-center justify-center hover:scale-110 transition-transform duration-300 group">
            <i class="fas fa-robot text-white text-2xl group-hover:scale-110 transition-transform"></i>
            <div class="absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center animate-pulse">
                <span class="text-white text-xs font-bold">!</span>
            </div>
        </button>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Initialisation AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100
        });

        // Variables globales
        let chatState = {
            isOpen: false,
            currentStep: 'welcome',
            userPreferences: {}
        };

        let currentSalon = null;
        let userLocation = null;
        let map = null;
        let userMarker = null;
        let salonMarkers = [];
        let currentStep = 1;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            loadSalons();
            initializeChatbot();
            initializeForm();
            updateAuthUI();
            initializeReservationModal();
            initializeMap();
            initializeSearch();
            initializeDashboard();
            
            // Initialisation des filtres
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Active le bouton
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active', 'bg-primary', 'text-white');
                        b.classList.add('bg-white', 'text-gray-700');
                    });
                    
                    this.classList.add('active', 'bg-primary', 'text-white');
                    this.classList.remove('bg-white', 'text-gray-700');
                    
                    const filter = this.dataset.filter;
                    filterSalons(filter);
                });
            });
        });

        // ====================
        // üéØ DASHBOARD COIFFEUR
        // ====================

        function initializeDashboard() {
            // V√©rifier si l'utilisateur est un coiffeur
            const user = JSON.parse(localStorage.getItem('keurcoiff_user') || '{}');
            const token = localStorage.getItem('keurcoiff_token');
            
            if (token && user.role === 'coiffeur') {
                showDashboard();
                loadDashboardData();
            }
        }

        function showDashboard() {
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('accueil').classList.add('hidden');
            
            // Mettre √† jour l'interface utilisateur
            const user = JSON.parse(localStorage.getItem('keurcoiff_user') || '{}');
            document.getElementById('userName').textContent = user.fullName || 'Coiffeur';
            document.getElementById('userInitial').textContent = (user.fullName || 'C').charAt(0).toUpperCase();
            document.getElementById('dashboardSalonName').textContent = user.salonName || 'Votre Salon';
            
            // Mettre √† jour la date
            const now = new Date();
            document.getElementById('dashboardDate').textContent = now.toLocaleDateString('fr-FR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function loadDashboardData() {
            // Donn√©es de d√©monstration pour le dashboard
            const demoReservations = [
                {
                    id: 1,
                    clientName: 'Awa Diop',
                    service: 'Tresses vanilles',
                    time: '10:00',
                    status: 'confirmed',
                    price: 8000,
                    duration: 120
                },
                {
                    id: 2,
                    clientName: 'Marie Ndiaye',
                    service: 'Coupe et brushing',
                    time: '11:30',
                    status: 'confirmed',
                    price: 6000,
                    duration: 90
                },
                {
                    id: 3,
                    clientName: 'Fatou Sow',
                    service: 'Tresses simples',
                    time: '14:00',
                    status: 'pending',
                    price: 4000,
                    duration: 60
                },
                {
                    id: 4,
                    clientName: 'Sophie Diallo',
                    service: 'Pose weave',
                    time: '16:00',
                    status: 'confirmed',
                    price: 15000,
                    duration: 120
                }
            ];

            // Afficher les r√©servations
            const reservationsList = document.getElementById('todayReservationsList');
            reservationsList.innerHTML = demoReservations.map(reservation => `
                <div class="reservation-item bg-white rounded-2xl p-4 border border-gray-100 shadow-sm">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h4 class="font-semibold text-gray-900">${reservation.clientName}</h4>
                            <p class="text-sm text-gray-600">${reservation.service}</p>
                        </div>
                        <span class="status-badge status-${reservation.status}">
                            ${reservation.status === 'confirmed' ? 'Confirm√©' : 
                              reservation.status === 'pending' ? 'En attente' : 
                              reservation.status === 'completed' ? 'Termin√©' : 'Annul√©'}
                        </span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-clock mr-2"></i>
                            <span>${reservation.time} ‚Ä¢ ${reservation.duration}min</span>
                        </div>
                        <div class="text-primary font-bold">
                            ${reservation.price.toLocaleString()} FCFA
                        </div>
                    </div>
                    <div class="flex space-x-2 mt-3">
                        <button onclick="startReservation(${reservation.id})" class="flex-1 bg-primary text-white py-2 px-3 rounded-lg text-sm font-semibold hover:bg-purple-600 transition-colors">
                            D√©marrer
                        </button>
                        <button onclick="viewReservationDetails(${reservation.id})" class="flex-1 bg-gray-100 text-gray-700 py-2 px-3 rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors">
                            D√©tails
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function toggleDashboardMenu() {
            const menu = document.getElementById('dashboardMenu');
            menu.classList.toggle('hidden');
        }

        function toggleNotifications() {
            showNotification('3 nouvelles notifications', 'info');
        }

        function viewAllReservations() {
            showNotification('Ouverture de toutes les r√©servations', 'info');
            // Logique pour afficher toutes les r√©servations
        }

        function startReservation(reservationId) {
            showNotification(`D√©marrage de la r√©servation #${reservationId}`, 'success');
            // Logique pour d√©marrer une r√©servation
        }

        function viewReservationDetails(reservationId) {
            showNotification(`D√©tails de la r√©servation #${reservationId}`, 'info');
            // Logique pour afficher les d√©tails
        }

        // ====================
        // üîß FONCTIONS MANQUANTES AJOUT√âES
        // ====================

        // Navigation entre pages
        function goBack() {
            if (document.referrer) {
                window.history.back();
            } else {
                window.location.href = 'index.html';
            }
        }

        function performSearch() {
            const query = document.getElementById('globalSearch').value.trim();
            if (query) {
                showNotification(`Recherche de "${query}" en cours...`, 'info');
                // Simulation de recherche
                setTimeout(() => {
                    const results = demoSalons.filter(salon => 
                        salon.name.toLowerCase().includes(query.toLowerCase()) ||
                        salon.location.quarter.toLowerCase().includes(query.toLowerCase()) ||
                        salon.services.some(service => service.name.toLowerCase().includes(query.toLowerCase()))
                    );
                    
                    if (results.length > 0) {
                        displaySalons(results);
                        showNotification(`${results.length} r√©sultats trouv√©s pour "${query}"`, 'success');
                    } else {
                        showNotification(`Aucun r√©sultat trouv√© pour "${query}"`, 'error');
                    }
                }, 1000);
            }
        }

        function initializeSearch() {
            const searchInput = document.getElementById('globalSearch');
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        // Partage sur r√©seaux sociaux
        function shareOnWhatsApp() {
            const text = `Je viens de r√©server chez KeurCoiff' ! üéâ\n\nD√©couvrez cette application incroyable pour r√©server votre coiffeur √† Dakar.`;
            const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
            showNotification('Partage WhatsApp ouvert', 'success');
        }

        function shareOnFacebook() {
            const url = 'https://www.facebook.com/sharer/sharer.php?u=https://keurcoiff.sn';
            window.open(url, '_blank');
            showNotification('Partage Facebook ouvert', 'success');
        }

        function copyBookingLink() {
            const link = 'https://keurcoiff.sn';
            navigator.clipboard.writeText(link).then(() => {
                showNotification('Lien copi√© dans le presse-papier !', 'success');
            });
        }

        // Gestion des mots de passe
        function togglePassword(inputId, toggleId) {
            const passwordInput = document.getElementById(inputId);
            const passwordToggle = document.getElementById(toggleId);
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordToggle.classList.remove('fa-eye');
                passwordToggle.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                passwordToggle.classList.remove('fa-eye-slash');
                passwordToggle.classList.add('fa-eye');
            }
        }

        let countdownInterval;
        let countdownTime = 60;

        function resendCode() {
            const resendText = document.getElementById('resendText');
            const countdown = document.getElementById('countdown');
            
            resendText.classList.add('hidden');
            countdown.classList.remove('hidden');
            countdownTime = 60;
            
            updateCountdown();
            
            countdownInterval = setInterval(updateCountdown, 1000);
            
            showNotification('Code renvoy√© !', 'success');
        }

        function updateCountdown() {
            const countdown = document.getElementById('countdown');
            if (countdown) {
                countdown.textContent = ` (${countdownTime}s)`;
                
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('resendText').classList.remove('hidden');
                    countdown.classList.add('hidden');
                } else {
                    countdownTime--;
                }
            }
        }

        function moveToNext(input) {
            if (input.value.length === 1) {
                const next = input.nextElementSibling;
                if (next) next.focus();
            }
        }

        // Dashboard coiffeur
        function addReservation() {
            showNotification('Ouverture du formulaire de r√©servation...', 'info');
            setTimeout(() => {
                window.location.href = 'reservation.html';
            }, 1000);
        }

        function manageSalon() {
            showNotification('Gestion du salon...', 'info');
            // Logique pour g√©rer le salon
        }

        function updateAvailability() {
            showNotification('Modification des horaires...', 'info');
            // Logique pour modifier les horaires
        }

        function addService() {
            showNotification('Ajout d\'un nouveau service...', 'info');
            // Logique pour ajouter un service
        }

        function viewAnalytics() {
            showNotification('Ouverture des statistiques d√©taill√©es...', 'info');
            // Logique pour afficher les analytics
        }

        function manageStaff() {
            showNotification('Gestion de l\'√©quipe...', 'info');
            // Logique pour g√©rer le personnel
        }

        // Gestion des r√©servations utilisateur
        function viewReservationDetails(reservationId) {
            const reservation = currentReservations.find(r => r.id === reservationId);
            if (reservation) {
                showNotification(`D√©tails de la r√©servation ${reservationId}`, 'info');
                // Logique pour afficher les d√©tails
            }
        }

        function cancelReservation(reservationId) {
            if (confirm('√ätes-vous s√ªr de vouloir annuler cette r√©servation ?')) {
                showNotification('R√©servation annul√©e avec succ√®s', 'success');
                // Logique d'annulation
            }
        }

        function rateReservation(reservationId) {
            const rating = prompt('Donnez une note de 1 √† 5 √©toiles:');
            if (rating && rating >= 1 && rating <= 5) {
                showNotification('Merci pour votre note !', 'success');
                // Logique de notation
            }
        }

        // Gestion du profil utilisateur
        function editProfile() {
            showNotification('Mode √©dition du profil activ√©', 'info');
            // Logique d'√©dition
        }

        function cancelEdit() {
            showNotification('Modifications annul√©es', 'info');
            // Logique d'annulation
        }

        function changePassword() {
            showNotification('Redirection vers la page de changement de mot de passe', 'info');
            setTimeout(() => {
                window.location.href = 'forgot-password.html';
            }, 1000);
        }

        // Paiement
        let selectedPaymentMethod = null;

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            showPaymentForm(method);
            showNotification(`M√©thode de paiement ${method} s√©lectionn√©e`, 'info');
        }

        function showPaymentForm(method) {
            // Logique pour afficher le formulaire de paiement correspondant
            showNotification(`Affichage du formulaire ${method}`, 'info');
        }

        function loadPaymentForms() {
            // Chargement des formulaires de paiement
            showNotification('Formulaires de paiement charg√©s', 'info');
        }

        function processPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Veuillez s√©lectionner un moyen de paiement', 'error');
                return;
            }

            showNotification('Traitement du paiement en cours...', 'info');
            // Logique de traitement du paiement
        }

        function validatePaymentForm() {
            // Validation du formulaire de paiement
            return true;
        }

        // Processus de r√©servation
        function nextStep(step) {
            if (step === 2 && !selectedSalon) {
                showNotification('Veuillez s√©lectionner un salon', 'error');
                return;
            }
            
            if (step === 3 && !selectedService) {
                showNotification('Veuillez s√©lectionner un service', 'error');
                return;
            }
            
            currentStep = step;
            updateStepIndicator(step);
            showNotification(`√âtape ${step}`, 'info');
        }

        function prevStep(step) {
            currentStep = step;
            updateStepIndicator(step);
            showNotification(`Retour √† l'√©tape ${step}`, 'info');
        }

        function updateStepIndicator(step) {
            // Logique pour mettre √† jour l'indicateur d'√©tapes
            showNotification(`Indicateur mis √† jour pour l'√©tape ${step}`, 'info');
        }

        let selectedService = null;

        function selectSalon(salonId) {
            selectedSalon = demoSalons.find(s => s._id === salonId);
            showNotification(`Salon ${selectedSalon?.name} s√©lectionn√©`, 'success');
        }

        function selectService(serviceId) {
            selectedService = selectedSalon?.services.find(s => s._id === serviceId);
            showNotification(`Service ${selectedService?.name} s√©lectionn√©`, 'success');
        }

        function confirmBooking() {
            if (!selectedSalon || !selectedService) {
                showNotification('Veuillez s√©lectionner un salon et un service', 'error');
                return;
            }

            showNotification('Confirmation de la r√©servation...', 'info');
            // Logique de confirmation
        }

        // ====================
        // üó∫Ô∏è G√âOLOCALISATION AVANC√âE
        // ====================

        function initializeMap() {
            // Initialiser la carte centr√©e sur Dakar
            map = L.map('map').setView([14.6928, -17.4467], 12);
            
            // Ajouter la couche de tuiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
        }

        function getUserLocation() {
            if (!navigator.geolocation) {
                showNotification('La g√©olocalisation n\'est pas support√©e par votre navigateur', 'error');
                return;
            }

            showNotification('Localisation en cours...', 'info');

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    userLocation = { lat, lng };
                    
                    // Centrer la carte sur la position de l'utilisateur
                    map.setView([lat, lng], 14);
                    
                    // Ajouter ou mettre √† jour le marqueur utilisateur
                    if (userMarker) {
                        userMarker.setLatLng([lat, lng]);
                    } else {
                        userMarker = L.marker([lat, lng], {
                            icon: L.divIcon({
                                html: '<div class="location-pin bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center shadow-lg"><i class="fas fa-user"></i></div>',
                                className: 'user-location-marker',
                                iconSize: [32, 32],
                                iconAnchor: [16, 16]
                            })
                        }).addTo(map)
                        .bindPopup('Votre position actuelle')
                        .openPopup();
                    }
                    
                    // Mettre √† jour les salons proches
                    updateNearbySalons();
                    
                    showNotification('Localisation trouv√©e ! Affichage des salons proches.', 'success');
                },
                function(error) {
                    console.error('Erreur de g√©olocalisation:', error);
                    let message = 'Impossible de r√©cup√©rer votre position. ';
                    
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            message += 'Veuillez autoriser l\'acc√®s √† votre position.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            message += 'Les informations de localisation ne sont pas disponibles.';
                            break;
                        case error.TIMEOUT:
                            message += 'La demande de localisation a expir√©.';
                            break;
                        default:
                            message += 'Une erreur inconnue est survenue.';
                    }
                    
                    showNotification(message, 'error');
                    
                    // Utiliser une position par d√©faut (Dakar)
                    userLocation = { lat: 14.6928, lng: -17.4467 };
                    updateNearbySalons();
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Rayon de la Terre en km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = R * c;
            return distance * 1000; // Convertir en m√®tres
        }

        function updateNearbySalons() {
            if (!userLocation) return;

            // Nettoyer les anciens marqueurs
            salonMarkers.forEach(marker => map.removeLayer(marker));
            salonMarkers = [];

            const nearbyContainer = document.getElementById('nearbySalons');
            const nearbyCount = document.getElementById('nearbyCount');
            const distanceAvg = document.getElementById('distanceAvg');
            const topRated = document.getElementById('topRated');

            let totalDistance = 0;
            let salonCount = 0;
            let maxRating = 0;

            // Simulation de donn√©es de salons avec coordonn√©es
            const salonsWithCoords = [
                {
                    ...demoSalons[0],
                    coordinates: { lat: 14.6928 + (Math.random() - 0.5) * 0.02, lng: -17.4467 + (Math.random() - 0.5) * 0.02 }
                },
                {
                    ...demoSalons[1],
                    coordinates: { lat: 14.6928 + (Math.random() - 0.5) * 0.02, lng: -17.4467 + (Math.random() - 0.5) * 0.02 }
                },
                {
                    ...demoSalons[2],
                    coordinates: { lat: 14.6928 + (Math.random() - 0.5) * 0.02, lng: -17.4467 + (Math.random() - 0.5) * 0.02 }
                }
            ];

            // Trier les salons par distance
            const nearbySalons = salonsWithCoords
                .map(salon => {
                    const distance = calculateDistance(
                        userLocation.lat, userLocation.lng,
                        salon.coordinates.lat, salon.coordinates.lng
                    );
                    return { ...salon, distance };
                })
                .sort((a, b) => a.distance - b.distance)
                .slice(0, 5); // Top 5 plus proches

            // Mettre √† jour l'interface
            nearbyContainer.innerHTML = nearbySalons.map(salon => `
                <div class="bg-white/10 rounded-2xl p-4 hover:bg-white/20 transition-all cursor-pointer" onclick="openReservationModal('${salon._id}', '${salon.name}')">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold">${salon.name}</h4>
                        <span class="distance-badge">${Math.round(salon.distance)}m</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <div class="flex items-center text-yellow-300">
                            ${'‚òÖ'.repeat(Math.floor(salon.rating?.average || 0))}
                            <span class="text-white/80 ml-1">${salon.rating?.average || 'N/A'}</span>
                        </div>
                        <div class="text-white/80">
                            ${salon.services && salon.services.length > 0 ? salon.services[0].price.toLocaleString() + ' FCFA' : 'Prix sur demande'}
                        </div>
                    </div>
                    <div class="text-xs text-white/60 mt-2">
                        <i class="fas fa-map-marker-alt mr-1"></i>
                        ${salon.location?.quarter}, ${salon.location?.city}
                    </div>
                </div>
            `).join('');

            // Ajouter les marqueurs sur la carte
            nearbySalons.forEach(salon => {
                const marker = L.marker([salon.coordinates.lat, salon.coordinates.lng], {
                    icon: L.divIcon({
                        html: `<div class="bg-white text-primary w-10 h-10 rounded-full flex items-center justify-center shadow-lg border-2 border-primary">
                                <i class="fas fa-scissors"></i>
                              </div>`,
                        className: 'salon-marker',
                        iconSize: [40, 40],
                        iconAnchor: [20, 20]
                    })
                }).addTo(map)
                .bindPopup(`
                    <div class="p-2">
                        <h4 class="font-bold">${salon.name}</h4>
                        <p class="text-sm text-gray-600">${salon.location?.quarter}, ${salon.location?.city}</p>
                        <div class="flex items-center text-yellow-400 text-sm">
                            ${'‚òÖ'.repeat(Math.floor(salon.rating?.average || 0))}
                            <span class="text-gray-700 ml-1">${salon.rating?.average || 'N/A'}</span>
                        </div>
                        <div class="text-primary font-bold mt-2">
                            ${salon.services && salon.services.length > 0 ? salon.services[0].price.toLocaleString() + ' FCFA' : 'Prix sur demande'}
                        </div>
                        <button onclick="openReservationModal('${salon._id}', '${salon.name}')" class="w-full mt-2 bg-primary text-white py-2 px-4 rounded-lg text-sm hover:bg-purple-600 transition-colors">
                            R√©server
                        </button>
                    </div>
                `);

                salonMarkers.push(marker);
                totalDistance += salon.distance;
                salonCount++;
                maxRating = Math.max(maxRating, salon.rating?.average || 0);
            });

            // Mettre √† jour les statistiques
            nearbyCount.textContent = salonCount;
            distanceAvg.textContent = salonCount > 0 ? Math.round(totalDistance / salonCount) + 'm' : '0m';
            topRated.textContent = maxRating > 0 ? maxRating + '‚òÖ' : 'N/A';
        }

        function filterByDistance(maxDistance) {
            if (!userLocation) {
                showNotification('Veuillez d\'abord activer votre g√©olocalisation', 'error');
                return;
            }

            const nearbyContainer = document.getElementById('nearbySalons');
            const salons = Array.from(nearbyContainer.children);
            
            salons.forEach(salon => {
                const distanceText = salon.querySelector('.distance-badge').textContent;
                const distance = parseInt(distanceText.replace('m', ''));
                
                if (distance <= maxDistance) {
                    salon.style.display = 'block';
                } else {
                    salon.style.display = 'none';
                }
            });
        }

        function scrollToLocalisation() {
            document.getElementById('localisation').scrollIntoView({ 
                behavior: 'smooth' 
            });
            // D√©clencher automatiquement la g√©olocalisation
            setTimeout(() => {
                getUserLocation();
            }, 1000);
        }

        // ====================
        // üéØ GESTION DE L'AUTHENTIFICATION
        // ====================
        
        function updateAuthUI() {
            const authSection = document.getElementById('authSection');
            const token = localStorage.getItem('keurcoiff_token');
            const user = JSON.parse(localStorage.getItem('keurcoiff_user') || '{}');
            
            console.log('üîÑ Mise √† jour UI auth - Token:', !!token, 'User:', user);
            
            if (token && user.fullName) {
                // Utilisateur connect√©
                authSection.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <div class="text-right hidden sm:block">
                            <div class="text-sm font-medium text-gray-900">${user.fullName}</div>
                            <div class="text-xs text-gray-500">${user.phone || ''}</div>
                        </div>
                        <div class="relative group">
                            <button onclick="toggleUserMenu()" class="w-10 h-10 bg-gradient-to-r from-primary to-purple-600 rounded-full flex items-center justify-center text-white font-bold hover:shadow-lg transition-all">
                                ${user.fullName.charAt(0).toUpperCase()}
                            </button>
                            
                            <!-- Menu utilisateur d√©roulant -->
                            <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-2xl shadow-2xl border border-gray-200 py-2 z-50">
                                <a href="profile.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-user text-primary w-5"></i>
                                    <span>Mon profil</span>
                                </a>
                                <a href="mes-reservations.html" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-calendar text-primary w-5"></i>
                                    <span>Mes r√©servations</span>
                                </a>
                                <div class="border-t border-gray-200 my-2"></div>
                                <button onclick="logout()" class="flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 w-full text-left transition-colors">
                                    <i class="fas fa-sign-out-alt w-5"></i>
                                    <span>D√©connexion</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Utilisateur non connect√©
                authSection.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <a href="login.html" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 hidden sm:block">
                            Connexion
                        </a>
                        <a href="register.html" class="bg-primary text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg hover:scale-105 transition-all duration-200 shadow-md">
                            S'inscrire
                        </a>
                    </div>
                `;
            }
        }

        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Fermer le menu si on clique ailleurs
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const userButton = document.querySelector('[onclick="toggleUserMenu()"]');
            
            if (userMenu && userButton && !userMenu.contains(event.target) && !userButton.contains(event.target)) {
                userMenu.classList.add('hidden');
            }
        });

        function logout() {
            localStorage.removeItem('keurcoiff_token');
            localStorage.removeItem('keurcoiff_user');
            showNotification('D√©connexion r√©ussie', 'success');
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-4 rounded-2xl shadow-2xl z-50 max-w-sm demo-message ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : 'info'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // ====================
        // üéØ CHARGEMENT DES SALONS
        // ====================
        
        // DONN√âES DE D√âMO R√âALISTES
        const demoSalons = [
          {
            _id: '1',
            name: 'Salon Awa Beauty',
            location: {
              address: 'Rue 10, Plateau',
              quarter: 'Plateau',
              city: 'Dakar',
              coordinates: { lat: 14.6928, lng: -17.4467 }
            },
            contact: {
              phone: '771234567',
              whatsapp: '771234567',
              email: 'awa.salon@example.com'
            },
            services: [
              { 
                _id: '1',
                name: 'Tresses simples', 
                price: 4000, 
                duration: 120, 
                category: 'femme',
                description: 'Tresses africaines traditionnelles'
              },
              { 
                _id: '2',
                name: 'Tresses vanilles', 
                price: 8000, 
                duration: 180, 
                category: 'femme',
                description: 'Tresses vanilles fines et √©l√©gantes'
              },
              { 
                _id: '3',
                name: 'Pose weave', 
                price: 15000, 
                duration: 120, 
                category: 'femme',
                description: 'Pose de perruque weave professionnelle'
              }
            ],
            openingHours: {
              monday: { open: "08:00", close: "20:00", closed: false },
              tuesday: { open: "08:00", close: "20:00", closed: false },
              wednesday: { open: "08:00", close: "20:00", closed: false },
              thursday: { open: "08:00", close: "20:00", closed: false },
              friday: { open: "08:00", close: "20:00", closed: false },
              saturday: { open: "09:00", close: "18:00", closed: false },
              sunday: { open: "10:00", close: "16:00", closed: false }
            },
            rating: {
              average: 4.8,
              count: 47,
              breakdown: { 5: 35, 4: 10, 3: 2, 2: 0, 1: 0 }
            },
            features: {
              homeService: true,
              mobilePayment: true,
              parking: true,
              wifi: true,
              airConditioning: true
            },
            photos: ['/uploads/salon-awa-1.jpg'],
            isVerified: true,
            isActive: true,
            description: 'Salon de coiffure sp√©cialis√© dans les tresses et soins capillaires'
          },
          {
            _id: '2',
            name: 'Chez Ibra - Coiffeur Homme',
            location: {
              address: 'Rue des artisans, Ouakam',
              quarter: 'Ouakam',
              city: 'Dakar',
              coordinates: { lat: 14.7245, lng: -17.4810 }
            },
            contact: {
              phone: '772345678',
              whatsapp: '772345678'
            },
            services: [
              { 
                _id: '4',
                name: 'Coupe homme', 
                price: 2500, 
                duration: 45, 
                category: 'homme',
                description: 'Coupe moderne et classique'
              },
              { 
                _id: '5',
                name: 'D√©grad√©', 
                price: 4000, 
                duration: 60, 
                category: 'homme',
                description: 'D√©grad√© professionnel'
              },
              { 
                _id: '6',
                name: 'Tresses homme', 
                price: 5000, 
                duration: 90, 
                category: 'homme',
                description: 'Tresses africaines pour homme'
              },
              { 
                _id: '7',
                name: 'Barbe', 
                price: 1500, 
                duration: 30, 
                category: 'homme',
                description: 'Taille et entretien de barbe'
              }
            ],
            openingHours: {
              monday: { open: "07:00", close: "22:00", closed: false },
              tuesday: { open: "07:00", close: "22:00", closed: false },
              wednesday: { open: "07:00", close: "22:00", closed: false },
              thursday: { open: "07:00", close: "22:00", closed: false },
              friday: { open: "07:00", close: "22:00", closed: false },
              saturday: { open: "08:00", close: "20:00", closed: false },
              sunday: { open: "09:00", close: "18:00", closed: false }
            },
            rating: {
              average: 4.9,
              count: 89,
              breakdown: { 5: 75, 4: 12, 3: 2, 2: 0, 1: 0 }
            },
            features: {
              homeService: true,
              mobilePayment: true,
              parking: false,
              wifi: true
            },
            photos: ['/uploads/salon-ibra-1.jpg'],
            isVerified: true,
            isActive: true,
            description: 'Sp√©cialiste de la coiffure masculine et des d√©grad√©s'
          },
          {
            _id: '3',
            name: 'Beauty Dakar - Spa & Coiffure',
            location: {
              address: 'Route de la Corniche, Almadies',
              quarter: 'Almadies',
              city: 'Dakar',
              coordinates: { lat: 14.7390, lng: -17.5166 }
            },
            contact: {
              phone: '774567890',
              whatsapp: '774567890',
              email: 'beauty.dakar@example.com'
            },
            services: [
              { 
                _id: '8',
                name: 'Coupe et brushing', 
                price: 8000, 
                duration: 90, 
                category: 'femme',
                description: 'Coupe moderne avec brushing professionnel'
              },
              { 
                _id: '9',
                name: 'Tresses artistiques', 
                price: 12000, 
                duration: 180, 
                category: 'femme',
                description: 'Tresses cr√©atives et designs uniques'
              },
              { 
                _id: '10',
                name: 'Soins cheveux', 
                price: 6000, 
                duration: 60, 
                category: 'femme',
                description: 'Soins hydratants et traitements capillaires'
              },
              { 
                _id: '11',
                name: 'Maquillage', 
                price: 10000, 
                duration: 60, 
                category: 'femme',
                description: 'Maquillage professionnel √©v√©nementiel'
              }
            ],
            openingHours: {
              monday: { open: "09:00", close: "19:00", closed: false },
              tuesday: { open: "09:00", close: "19:00", closed: false },
              wednesday: { open: "09:00", close: "19:00", closed: false },
              thursday: { open: "09:00", close: "19:00", closed: false },
              friday: { open: "09:00", close: "19:00", closed: false },
              saturday: { open: "10:00", close: "18:00", closed: false },
              sunday: { closed: true }
            },
            rating: {
              average: 4.7,
              count: 124,
              breakdown: { 5: 85, 4: 30, 3: 7, 2: 2, 1: 0 }
            },
            features: {
              homeService: false,
              mobilePayment: true,
              parking: true,
              wifi: true,
              airConditioning: true,
              accessibility: true
            },
            photos: ['/uploads/salon-beauty-1.jpg', '/uploads/salon-beauty-2.jpg'],
            isVerified: true,
            isActive: true,
            description: 'Espace beaut√© premium avec spa et coiffure haut de gamme'
          }
        ];

        async function loadSalons() {
          try {
            console.log('üöÄ Tentative de connexion √† l\'API...');
            
            // Test de connexion √† l'API
            const API_URL = 'http://localhost:5000/api/salons';
            console.log('üì° URL de l\'API:', API_URL);
            
            const response = await fetch(API_URL, {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
              },
            });
            
            console.log('‚úÖ Statut r√©ponse:', response.status);
            
            if (response.ok) {
              const result = await response.json();
              console.log('üéâ Donn√©es re√ßues:', result);
              
              if (result.success && result.data) {
                displaySalons(result.data);
                document.getElementById('loadingSalons').style.display = 'none';
                return;
              }
            }
            
            // Si l'API √©choue, utiliser les donn√©es de d√©mo
            throw new Error('API non accessible');
            
          } catch (error) {
            console.log('üîÑ Utilisation des donn√©es de d√©monstration...', error.message);
            
            // Afficher les salons de d√©mo
            displaySalons(demoSalons);
            document.getElementById('loadingSalons').style.display = 'none';
            
            // Afficher un message d'information
            showDemoMessage();
            
          }
        }

        function showDemoMessage() {
          const message = `
            <div class="demo-message fixed top-4 right-4 bg-blue-500 text-white px-6 py-4 rounded-2xl shadow-2xl z-50 max-w-sm">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                  <i class="fas fa-rocket text-white"></i>
                </div>
                <div>
                  <div class="font-bold text-sm">Mode D√©monstration</div>
                  <div class="text-xs opacity-90">Donn√©es locales affich√©es</div>
                  <div class="text-xs opacity-70 mt-1">L'API est disponible sur le port 5000</div>
                </div>
              </div>
            </div>
          `;
          
          document.body.insertAdjacentHTML('beforeend', message);
          
          // Supprimer le message apr√®s 5 secondes
          setTimeout(() => {
            const messageEl = document.querySelector('.demo-message');
            if (messageEl) {
              messageEl.remove();
            }
          }, 5000);
        }

        // Affichage des salons
        function displaySalons(salons) {
          const grid = document.getElementById('salonsGrid');
          
          if (!salons || salons.length === 0) {
            grid.innerHTML = `
              <div class="col-span-3 text-center py-12">
                <i class="fas fa-store-slash text-4xl text-gray-400 mb-4"></i>
                <div class="text-gray-600">Aucun salon disponible pour le moment</div>
              </div>
            `;
            return;
          }
          
          grid.innerHTML = salons.map(salon => `
            <div class="salon-card bg-white rounded-3xl shadow-lg hover-lift border border-gray-100 overflow-hidden" data-category="${salon.features?.homeService ? 'domicile' : 'salon'}">
              <div class="h-48 bg-gradient-to-r from-primary to-purple-600 relative overflow-hidden">
                ${salon.features?.homeService ? `
                  <div class="absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                    üè† √Ä domicile
                  </div>
                ` : ''}
                <div class="absolute bottom-4 left-4 text-white">
                  <div class="text-2xl font-bold">${salon.name}</div>
                  <div class="flex items-center text-white/90">
                    <i class="fas fa-map-marker-alt mr-2"></i>
                    ${salon.location?.quarter}, ${salon.location?.city}
                  </div>
                </div>
              </div>
              
              <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                  <div class="flex items-center text-yellow-400">
                    ${'‚òÖ'.repeat(Math.floor(salon.rating?.average || 0))}${(salon.rating?.average || 0) % 1 !== 0 ? '¬Ω' : ''}
                    <span class="text-gray-600 ml-2">${salon.rating?.average || 'N/A'}</span>
                  </div>
                  <div class="text-2xl font-bold text-primary">
                    ${salon.services && salon.services.length > 0 ? salon.services[0].price.toLocaleString() + ' FCFA' : 'Prix sur demande'}
                  </div>
                </div>
                
                <div class="flex flex-wrap gap-2 mb-4">
                  ${salon.services ? salon.services.slice(0, 3).map(service => `
                    <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">${service.name}</span>
                  `).join('') : ''}
                </div>
                
                <!-- BOUTON MODIFI√â AVEC ONCLICK -->
                <button onclick="openReservationModal('${salon._id}', '${salon.name}')" 
                        class="w-full bg-primary text-white py-3 rounded-xl font-semibold hover:bg-purple-600 transition-colors flex items-center justify-center">
                  <i class="fas fa-calendar-plus mr-2"></i>
                  R√©server maintenant
                </button>
              </div>
            </div>
          `).join('');
        }

        // ====================
        // üéØ GESTION DES R√âSERVATIONS
        // ====================

        function initializeReservationModal() {
            // Configurer la date minimum (aujourd'hui)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('reservationDate').min = today;
            document.getElementById('reservationDate').value = today;
        }

        // Ouvrir le modal de r√©servation
        async function openReservationModal(salonId, salonName) {
            console.log('üéØ Ouverture modal r√©servation pour:', salonName, salonId);
            
            try {
                // Afficher le loading
                document.getElementById('reservationSalonName').textContent = salonName;
                document.getElementById('reservationSalonId').value = salonId;
                
                // Charger les services du salon
                await loadSalonServices(salonId);
                
                // Afficher le modal
                document.getElementById('reservationModal').classList.remove('hidden');
                
                currentSalon = { id: salonId, name: salonName };
                
            } catch (error) {
                console.error('‚ùå Erreur ouverture modal:', error);
                alert('Erreur lors du chargement des services');
            }
        }

        // Fermer le modal
        function closeReservationModal() {
            document.getElementById('reservationModal').classList.add('hidden');
            document.getElementById('reservationForm').reset();
            currentSalon = null;
        }

        // Charger les services d'un salon
        async function loadSalonServices(salonId) {
            try {
                const API_URL = `http://localhost:5000/api/salons/${salonId}/services`;
                console.log('üì° Chargement services depuis:', API_URL);
                
                const response = await fetch(API_URL);
                
                if (response.ok) {
                    const result = await response.json();
                    
                    if (result.success) {
                        const select = document.getElementById('reservationService');
                        select.innerHTML = '<option value="">Choisir un service</option>';
                        
                        result.data.services.forEach(service => {
                            const option = document.createElement('option');
                            option.value = service._id || service.name;
                            option.textContent = `${service.name} - ${service.price.toLocaleString()} FCFA`;
                            option.dataset.price = service.price;
                            option.dataset.duration = service.duration;
                            select.appendChild(option);
                        });
                        
                        return;
                    }
                }
                
                // Fallback: services par d√©faut
                setDefaultServices();
                
            } catch (error) {
                console.log('üîÑ Utilisation services par d√©faut');
                setDefaultServices();
            }
        }

        function setDefaultServices() {
            const select = document.getElementById('reservationService');
            const defaultServices = [
                { name: 'Tresses simples', price: 4000 },
                { name: 'Tresses vanilles', price: 8000 },
                { name: 'Coupe et brushing', price: 6000 },
                { name: 'D√©grad√© homme', price: 4000 },
                { name: 'Soins cheveux', price: 5000 }
            ];
            
            select.innerHTML = '<option value="">Choisir un service</option>';
            defaultServices.forEach(service => {
                const option = document.createElement('option');
                option.value = service.name;
                option.textContent = `${service.name} - ${service.price.toLocaleString()} FCFA`;
                select.appendChild(option);
            });
        }

        // Soumission du formulaire de r√©servation
        document.getElementById('reservationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            // V√©rifier l'authentification
            const token = localStorage.getItem('keurcoiff_token');
            const user = JSON.parse(localStorage.getItem('keurcoiff_user') || '{}');
            
            if (!token || !user.fullName) {
                alert('üîê Veuillez vous connecter pour effectuer une r√©servation');
                closeReservationModal();
                // Simulation redirection vers login
                showNotification('Veuillez vous connecter pour r√©server', 'error');
                return;
            }
            
            // Animation de chargement
            submitBtn.innerHTML = '<div class="loader-small"></div> Traitement...';
            submitBtn.disabled = true;
            
            try {
                const formData = {
                    salonId: document.getElementById('reservationSalonId').value,
                    serviceId: document.getElementById('reservationService').value,
                    date: document.getElementById('reservationDate').value,
                    time: document.getElementById('reservationTime').value,
                    notes: document.getElementById('reservationNotes').value
                };
                
                console.log('üìÖ Donn√©es r√©servation:', formData);
                
                // Envoyer √† l'API
                const API_URL = 'http://localhost:5000/api/reservations';
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    if (result.success) {
                        // Succ√®s
                        showReservationSuccess(currentSalon.name, formData.date, formData.time);
                        closeReservationModal();
                    } else {
                        throw new Error(result.message);
                    }
                } else {
                    throw new Error('Erreur API');
                }
                
            } catch (error) {
                console.error('‚ùå Erreur r√©servation:', error);
                
                // Simulation r√©ussie si API hors ligne
                showReservationSuccess(currentSalon.name, 
                    document.getElementById('reservationDate').value,
                    document.getElementById('reservationTime').value);
                closeReservationModal();
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });

        function showReservationSuccess(salonName, date, time) {
            const successHTML = `
                <div class="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-2xl shadow-2xl z-50 max-w-sm demo-message">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-sm">‚úÖ R√©servation confirm√©e !</div>
                            <div class="text-xs opacity-90">${salonName}</div>
                            <div class="text-xs opacity-70 mt-1">${new Date(date).toLocaleDateString()} √† ${time}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', successHTML);
            
            setTimeout(() => {
                const messageEl = document.querySelector('.demo-message');
                if (messageEl) messageEl.remove();
            }, 5000);
        }

        function filterSalons(filter) {
            const cards = document.querySelectorAll('.salon-card');
            cards.forEach(card => {
                if (filter === 'all' || card.dataset.category === filter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Gestion du formulaire partenaire
        function initializeForm() {
            const form = document.getElementById('partnerForm');
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                
                // Animation de chargement
                submitBtn.innerHTML = `
                    <div class="loader-small"></div>
                    <span class="ml-2">Traitement...</span>
                `;
                submitBtn.disabled = true;
                
                try {
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData);
                    
                    // Simulation envoi
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Succ√®s
                    form.innerHTML = `
                        <div class="text-center py-8">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-check text-green-600 text-2xl"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-gray-900 mb-2">F√©licitations !</h4>
                            <p class="text-gray-600 mb-6">
                                Votre inscription a √©t√© re√ßue. Notre √©quipe vous contacte dans les 2 heures.
                            </p>
                            <div class="bg-green-50 border border-green-200 rounded-2xl p-4">
                                <div class="flex items-center text-green-800">
                                    <i class="fas fa-phone mr-3"></i>
                                    <span>+221 77 123 45 67</span>
                                </div>
                            </div>
                        </div>
                    `;
                    
                } catch (error) {
                    alert('Erreur lors de l\'envoi. Veuillez r√©essayer.');
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            });
        }

        // ====================
        // ü§ñ CHATBOT AVANC√â
        // ====================
        
        function initializeChatbot() {
            addBotMessage('üëã Bonjour ! Je suis votre assistant KeurCoiff\' IA ü§ñ', `
                Je peux vous aider √† :
                ‚Ä¢ üéØ Trouver le salon parfait
                ‚Ä¢ üí∞ Comparer les prix
                ‚Ä¢ üè† Organiser un service √† domicile
                ‚Ä¢ üì∏ Analyser vos photos de style
                
                Que souhaitez-vous faire aujourd'hui ?
            `);
        }

        function toggleChat() {
            const container = document.getElementById('chatbotContainer');
            container.style.display = container.style.display === 'none' ? 'flex' : 'none';
            chatState.isOpen = !chatState.isOpen;
        }

        function closeChat() {
            document.getElementById('chatbotContainer').style.display = 'none';
            chatState.isOpen = false;
        }

        function addBotMessage(title, content) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            messageDiv.innerHTML = `
                <div class="flex mb-6">
                    <div class="w-10 h-10 bg-gradient-to-r from-primary to-purple-600 rounded-2xl flex items-center justify-center mr-4 flex-shrink-0">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="flex-1">
                        <div class="bg-white rounded-2xl rounded-tl-none p-6 shadow-sm border border-gray-100">
                            <div class="font-semibold text-gray-900 mb-2">${title}</div>
                            <div class="text-gray-700 leading-relaxed whitespace-pre-line">${content}</div>
                        </div>
                        <div class="text-xs text-gray-500 mt-2">${new Date().toLocaleTimeString()}</div>
                    </div>
                </div>
            `;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function addUserMessage(message) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            messageDiv.innerHTML = `
                <div class="flex mb-6 justify-end">
                    <div class="flex-1 max-w-[80%]">
                        <div class="bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl rounded-tr-none p-6 shadow-sm">
                            <div class="leading-relaxed">${message}</div>
                        </div>
                        <div class="text-xs text-gray-500 mt-2 text-right">${new Date().toLocaleTimeString()}</div>
                    </div>
                </div>
            `;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // Simulation r√©ponse IA
                setTimeout(() => {
                    const responses = {
                        'salon': `J'ai trouv√© 15 salons pr√®s de vous ! üéØ
                        
Les meilleurs options :
‚Ä¢ **Salon Awa Beauty** - Plateau (4.8‚òÖ) - 5 000 FCFA
‚Ä¢ **Chez Ibra** - Ouakam (4.9‚òÖ) - 3 000 FCFA  
‚Ä¢ **Beauty Dakar** - Almadies (4.7‚òÖ) - 8 000 FCFA

Souhaitez-vous filtrer par prix ou service ?`,

                        'prix': `üí∞ **Grille tarifaire moyenne √† Dakar :**
                        
‚Ä¢ Tresses simples : 3 000 - 5 000 FCFA
‚Ä¢ Tresses complexes : 6 000 - 15 000 FCFA  
‚Ä¢ Coupe femme : 4 000 - 7 000 FCFA
‚Ä¢ Coupe homme : 2 000 - 4 000 FCFA
‚Ä¢ D√©grad√© : 3 000 - 6 000 FCFA
‚Ä¢ Pose weave : 8 000 - 20 000 FCFA

Les prix varient selon la complexit√© et la r√©putation du salon.`,

                        'domicile': `üè† **Service √† domicile disponible !**
                        
12 coiffeurs certifi√©s se d√©placent chez vous :
‚Ä¢ Majoration : +1 000 √† 2 000 FCFA
‚Ä¢ Disponibilit√© : 8h - 22h
‚Ä¢ Mat√©riel professionnel inclus
‚Ä¢ R√©servation minimum 2h √† l'avance

Voulez-vous voir les coiffeurs disponibles dans votre quartier ?`,

                        'photo': `üì∏ **Analyse d'image activ√©e !**
                        
Je peux analyser votre photo pour :
‚Ä¢ Identifier le style de coiffure
‚Ä¢ Trouver des salons sp√©cialis√©s
‚Ä¢ Estimer le prix et la dur√©e
‚Ä¢ Donner des alternatives similaires

Envoyez votre photo ou d√©crivez le style recherch√© !`
                    };
                    
                    let response = `Je comprends que vous cherchez des informations sur "${message}". Laissez-moi vous aider √† trouver exactement ce qu'il vous faut ! ü§ó`;
                    
                    for (const [keyword, botResponse] of Object.entries(responses)) {
                        if (message.toLowerCase().includes(keyword)) {
                            response = botResponse;
                            break;
                        }
                    }
                    
                    addBotMessage('Assistant KeurCoiff\'', response);
                }, 1000 + Math.random() * 1000);
            }
        }

        function sendQuickReply(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        // Gestion upload image
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                addUserMessage('üì∏ Photo envoy√©e pour analyse');
                
                // Simulation analyse IA
                setTimeout(() => {
                    addBotMessage('üîç Analyse d\'image', `
J'ai analys√© votre photo ! Voici mes recommandations :

**Style identifi√© :** Tresses vanilles moyennes
**Difficult√© :** ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (Interm√©diaire)
**Dur√©e estim√©e :** 2-3 heures
**Prix moyen :** 6 000 - 8 000 FCFA

**Salons sp√©cialis√©s :**
‚Ä¢ Salon Awa Beauty - Expert vanilles (4.8‚òÖ)
‚Ä¢ Tresses&D√©co - Sp√©cialiste tresses (4.7‚òÖ)
‚Ä¢ Chez Mariam - Artisan local (4.9‚òÖ)

Souhaitez-vous r√©server chez l'un de ces salons ?
                    `);
                }, 2000);
            }
        });

        // Enter pour envoyer
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>

